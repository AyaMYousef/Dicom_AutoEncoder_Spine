// Generated by CoffeeScript 1.8.0
(function() {
  var DEFAULTS, ENV_PREFIX, STREAM_DICT, bunyan, logger, _env,
    __slice = [].slice;

  bunyan = require("bunyan");

  ENV_PREFIX = "NDCM";

  DEFAULTS = {
    'LEVEL': 'info'
  };

  STREAM_DICT = {
    'process.stdout': process.stdout,
    'process.stderr': process.stderr
  };

  _env = function(what, name) {
    var _name, _ref, _ref1, _what;
    _what = what.toUpperCase();
    _name = name.toUpperCase();
    return (_ref = (_ref1 = process.env["" + ENV_PREFIX + "_" + _what + "_" + _name]) != null ? _ref1 : process.env["" + ENV_PREFIX + "_" + _what]) != null ? _ref : DEFAULTS[_what];
  };

  logger = function() {
    var name, names, obj, path, stream;
    names = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    name = names.join("_");
    obj = {
      'name': name,
      'level': _env('level', name)
    };
    stream = _env('stream', name);
    if (stream && STREAM_DICT[stream]) {
      obj.stream = STREAM_DICT[stream];
    }
    path = _env('path', name);
    if (path) {
      obj.path = path;
    }
    if ((path == null) && (stream == null)) {
      obj.stream = process.stderr;
    }
    return bunyan.createLogger(obj);
  };

  module.exports = logger;

}).call(this);
